<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>Structs</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">

<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/3_gml_overview/11_structs.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F11_structs.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F11_structs.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>Structs</h2>

<div class="body-scroll">
<p><br>
</p>

<p>A struct is - to put it simply - a variable that holds a
collection other variables. The variables that a struct holds can
be of any data type previously mentioned and these variables can be
read from and written to after the initial struct declaration, and
you can also add more variables to a struct after it has been
declared. The variables used in a struct should follow conventional
naming schemes, ie: they cannot start with a number and should only
be made up of alphanumeric characters and the underscore "_"
character, and also note that the contents of a struct are
independent of the instance or script that created it, and as such
you can - if you wish - use the built-in variable names like
<tt>image_index</tt> or <tt>x</tt> and <tt>y</tt>.</p>

<p>After the initial creation, structs have no processing overhead
while they exist, although they <i>will</i> take up space in
memory. The struct syntax is as follows:</p>

<p class="code"><i>&lt;variable&gt;</i> = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>&lt;variable&gt;</i> :
<i>&lt;value&gt;</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>&lt;variable&gt;</i> :
<i>&lt;value&gt;</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;etc...<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br></p>

<p><br>
So, an example of this in practice would be:</p>

<p class="code">mystruct = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;a : 20,<br>
&nbsp;&nbsp;&nbsp;&nbsp;b : "Hello World"<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br></p>

<p><br>
The above code creates an instance scope struct in the variable
"mystruct" and populates it with some values (structs can be
created at local, instance and global scope, just like any other
variable - see the section on <a href="6_scope.html">Variables and
Variable Scope</a> for more information). Note that you don't have
to populate the contents of a struct when it is created initially
and you can create an empty struct by simply doing this:</p>

<p class="code">mystruct = {};<br></p>

<p><br>
This struct can then be added to at a later point in the game code.
Here is an example of a struct with various variables and data
types:</p>

<p class="code">var _xx = 100;<br>
mystruct = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;a : 10,<br>
&nbsp;&nbsp;&nbsp;&nbsp;b : "Hello World",<br>
&nbsp;&nbsp;&nbsp;&nbsp;c : int64(5),<br>
&nbsp;&nbsp;&nbsp;&nbsp;d : _xx + 50,<br>
&nbsp;&nbsp;&nbsp;&nbsp;e : function( a, b )<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return a + b;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;f : [ 10, 20, 30, 40, 50 ]<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br></p>

<p><br>
You'll notice in the above code that you can also define methods
and use runtime functions in structs, and that you can use
expressions consisting of any variable previously defined within
the context of the struct itself, as well as any variable defined
within the scope of the struct itself.</p>

<p>It is worth noting that the keyword <a href=
"5_keywords.html"><tt>self</tt></a> can also be used within a
struct, and it will refer to the instance that the struct has been
bound to. Consider the following struct creation:</p>

<p class="code">mystruct = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;x : self.x,<br>
&nbsp;&nbsp;&nbsp;&nbsp;y : self.y<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br></p>

<p><br>
In the above code the struct member variables "x" and "y" are being
set to the values held in the instance variables "x" and "y", since
<tt>self</tt> refers to the instance that is defining the
struct.</p>

<p>Once a struct has been defined, you can access the data within
using the "point" notation, like this:</p>

<p class="code">mystruct = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;a : 20,<br>
&nbsp;&nbsp;&nbsp;&nbsp;b : "Hello World"<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
mystring = mystruct.b + string(mystruct.a);<br></p>

<p><br>
You can also perform operations on the variables within a structure
or use them in functions, just as you would any other variable. For
example:</p>

<p class="code">mystruct.a += 1;<br>
mystruct.b = mystruct.a + 20;<br>
mydir = point_direction(mouse_x, mouse_y, mystruct.xx,
mystruct.yy);<br></p>

<p><br>
Finally, structs can have other structs nested inside of them, like
this:</p>

<p class="code">mystruct = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;a : {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aa : "This is an
example"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;b : {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb : "And another
one"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br></p>

<p><br>
To access such nested structs you would still use the point
notation, like this:</p>

<p class="code">var _str = mystuct.a.aa + " " + mystruct.b.bb;<br>
show_debug_message(_str);<br></p>

<p><br>
When a struct is no longer required it can be removed from memory
using the <a href="structs/delete.html"><tt>delete</tt></a>
operator, which flags the struct as being able to be garbage
collected. This is not strictly required as the garbage collector
may do this automatically in the following game steps if the struct
is no longer referenced in your code, but it is good practice to do
so and we recommend it (for example, call <tt>delete</tt> in the
Clean Up event of an instance to explicitly tell the garbage
collector that an instance scope struct is to be deleted).</p>

<p>Also note that structs can be created using functions, which
requires the use of the <a href="structs/new.html"><tt>new</tt></a>
operator and the keyword <tt>constructor</tt>, as shown in the
following example:</p>

<p class="code">Vector2 = function(_x, _y) constructor<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;x = _x;<br>
&nbsp;&nbsp;&nbsp;&nbsp;y = _y;<br>
&nbsp;&nbsp;&nbsp;&nbsp;static Add = function( _other )<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x += _other.x;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y += _other.y;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br></p>

<p><br>
Here we are creating the function <tt>Vector2</tt> and telling
<i>GameMaker Studio 2</i> that this is a function for making a
struct by adding the <tt>constructor</tt> keyword after the
definition. You can then call this function like this:</p>

<p class="code">v1 = new Vector2(10, 10);<br></p>

<p><br>
Now the variable <tt>v1</tt> will reference a struct with the
variables <tt>x</tt> and <tt>y</tt> and the <a href=
"variable_scope/method_variables.html">method variable</a>
<tt>Add</tt>. Structs created this way will also support single
level <b>inheritance</b>, ie: you can create a struct using a
function that inherits the data from another constructor function.
For example, we created a <tt>Vector2</tt> function above, so we
can then use that as the "parent" for another function
<tt>Vector3</tt>:</p>

<p class="code">function Vector3(_x, _y, _z) : Vector2(_x, _y)
constructor<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;z = _z;<br>
&nbsp;&nbsp;&nbsp;&nbsp;static Add = function( _other )<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x += _other.x;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y += _other.y;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z += _other.z;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br></p>

<p><br>
As you can see, when defining the function we use a colon ":" to
separate the new function from the "parent" function to be
inherited from, and we can now do things like this:</p>

<p class="code">var v1 = new Vector3(10, 10, 20);<br>
var v2 = new Vector3(100, 100, 200);<br>
v1.Add( v2 );<br>
show_debug_message(v1);</p>

<p><br>
The output shown for the above code would be:</p>

<p class="code">{ 110, 110, 220 }<br></p>

<p><br>
For more details on the <tt>new</tt> and <tt>delete</tt> operators,
please see the following pages:</p>

<ul>
<li><a href="structs/new.html"><tt>new</tt></a><br>
</li>

<li><a href="structs/delete.html"><tt>delete</tt></a><br>
</li>
</ul>

<p><br>
Finally, there is a runtime function that you can use to check if a
variable is a struct as well as a number of <tt>variable_</tt>
functions:</p>

<ul>
<li><a href=
"checking_data_types/is_struct.html"><tt>is_struct</tt></a><br>
</li>

<li><a href=
"variable_functions/variable_struct_exists.html"><tt>variable_struct_exists</tt></a><br>

</li>

<li><a href=
"variable_funcions/variable_struct_get.html"><tt>variable_struct_get</tt></a><br>

</li>

<li><a href=
"variable_functions/variable_struct_set.html"><tt>variable_struct_set</tt></a><br>

</li>

<li><a href=
"variable_functions/variable_struct_get_names.html"><tt>variable_struct_get_names</tt></a><br>

</li>

<li><a href=
"variable_functions/variable_struct_names_count.html"><tt>variable_struct_names_count</tt></a><br>

</li>
</ul>

<p><br>
</p>
</div>

<div class="footer">
<div class="buttons">
<div class="clear">
<div style="float:left">Back: <a href="index.html">GML
Overview</a></div>

<div style="float:right">Next: <a href=
"12_assignments.html">Assignments</a></div>
</div>
</div>

<h5>© Copyright YoYo Games Ltd. 2019 All Rights Reserved</h5>
</div>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
